---
layout: post
title:      "Capstone Project"
date:       2019-12-23 12:57:20 -0500
permalink:  capstone_project
---


The goal of my capstone project was to find if there are any methods for getting larger returns than the whole S&P 500 using only the S&P 500 stocks. I first needed to get the data that I used for running the calculations. I found an API that had all the S&P 500 stocks stock price, financials, company profiles, and ratios for the last 10 years at financialmodelingprep.com. So after I downloaded all the information I made some excel files with the data. Then I started to implement a common stock strategy called simple moving average cross overs. I started by calculating the moving average of 2 different moving averages. For example if the 5 day moving average was less than the 20 day moving average I would short the market and if the 5 day moving average was more than the 20 day moving average I would go long. Then I would go through the buy orders that I had and I would check if it had hit its price target which I set at a 1% profit. If the buy order hit the price target then I would add the amount of time it took for that buy to get a 1% profit and record the annual return percentage. I would do this for shorts also. After I went through all the buys and shorts I could see how many days of having money invested I would have had and how good of a return I would have gotten. The results were not very good since I did not have nearly enough computing power to run all of the different strategies on all of the stocks to see which moving averages to buy, with what price targets, and any other type of extras such as selling after a certain time period to free up money, putting a stop loss, or finding if certain strategies work better for shorting than going long or vice versa. I believe that there would be some alpha or higher returns than the S&P 500 if I was to run the calculations. This is a common trading strategy called swing trading and technical analysis. I believe that running these calculations would not cost much more than perhaps $50 on a google cloud service, but could help returns go up on $10,000 5% or $500 per year. Well worth the investment. 

![The returns that I got with a 6 month momentum strategy 35% returns](https://github.com/MikeDaBossss/Capstone-Project/blob/master/Momentum6Mo.png)


![The 3 month momentum strategy, not as good but still better than S&P 500. 17% returns](https://github.com/MikeDaBossss/Capstone-Project/blob/master/Momentum3Mo.png)


My momentum strategy was based on strategies that I found on quantpedia.com they have over 70 free stock market strategies, and over 400 total strategies. They read finance research papers and organize the best strategies or the ones that they like. I saw a momentum sector rotating strategy where every month the portfolio would sell any sector ETF that doesn’t have the top momentum in the last time period and would buy the highest momentum ETF’s. I did this strategy except for I found the top 10% momentum in stock price stocks and bought those. I calculated the momentum using the last 6 months gain in price. I was able to get 35% returns using this method which is much more than the stock market. There are probably other factors to calculate momentum on such as revenue momentum or return on asset growth momentum combined with different time periods such as 1 month, 3 months, and 1 year that would return even more than 35%. Possibly even combining multiple momentums and different time periods together.

![S&P 500 returns in the same time period](https://github.com/MikeDaBossss/Capstone-Project/blob/master/SP500.png)

My random forest strategy  was to take financials and ratios of stocks and use those fundamentals to figure out which stocks would return the most amount of money. I would calculate if the latest financials were bigger numbers than the second to last financials and ratios. Then I would run a random forest on last months combination of current financials and ratios and if the financials and ratios were more than the time before. I would classify if the certain stock would go up a certain percentage or not. I tried to use a combination of three months as a time period for the classification along with a 20% gain in those three months. If I could get 20% every quarter in a year I would be getting 107% per year. That is 9 times more than the S&P 500 roughly. My random forest was not very accurate at calculating which stocks would go up 20% given a certain 3 month time period. It did produce decent results of 10.7% per year. I did not have enough computing time or resources to try enough parameters in order to get better results, but I think that using this method of classifying could be highly profitable. In order to get better results I thought about adding past momentum in the stock price, more momentum in the financials information, different return percentages, different random forest parameters, and different time periods. Also this method only involves going long on positions which means buying and then hoping that the price goes up, but this method should be able to classify whether stocks will go down a lot or not based on the same features. So if I wanted to maximize results I would try to classify stocks into a few categories of returns depending on the time period adding more categories. Then I would go long on the best classified stocks and short on the worst classified stocks hopefully that if the market behaves the same as in the past then my method would win a lot on the long and the short getting more of the biggest returns per time period than if I had to go only long I would have fewer stocks that would get such big returns. If the market goes bad then my shorts should do really good to make up for the longs not doing as good and vice versa. 


[The link to my github repository](https://github.com/MikeDaBossss/Capstone-Project)
